(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.3' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     11942,        322]
NotebookOptionsPosition[     10193,        289]
NotebookOutlinePosition[     10609,        306]
CellTagsIndexPosition[     10566,        303]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"Clear", "[", "\"\<Global`*\>\"", "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"DirectoryName", "[", 
     RowBox[{
      RowBox[{"NotebookFileName", "[", "]"}], ",", "2"}], "]"}], "<>", 
    "\"\<Text\\\\\>\""}], "//", "SetDirectory"}], ";"}]}], "Input",
 GeneratedCell->False,
 CellAutoOverwrite->False,
 CellChangeTimes->{
  3.8846668061918993`*^9, {3.945073982471921*^9, 3.945074019686905*^9}, 
   3.945074492371523*^9, {3.945119732344062*^9, 3.9451197610894575`*^9}, {
   3.945120234758083*^9, 3.945120235560657*^9}},
 CellLabel->"In[16]:=",ExpressionUUID->"4c86b7e1-e625-43e0-a6e7-4f40cbfc7b19"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"result", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"extract", "[", 
   RowBox[{"i_", ",", "name_"}], "]"}], ":=", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"imported", ",", "vertin"}], "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"imported", "=", 
      RowBox[{"Import", "[", 
       RowBox[{"i", ",", "\"\<Data\>\""}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"vertin", "=", 
      RowBox[{"Select", "[", 
       RowBox[{
        RowBox[{"imported", "[", 
         RowBox[{"[", "3", "]"}], "]"}], ",", 
        RowBox[{
         RowBox[{"MemberQ", "[", 
          RowBox[{
           RowBox[{"#", "[", 
            RowBox[{"[", 
             RowBox[{"3", ",", "12"}], "]"}], "]"}], ",", 
           RowBox[{"ToString", "@", "name"}]}], "]"}], "&"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"result", "=", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"result", ",", 
         RowBox[{"Table", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"vertin", "[", 
             RowBox[{"[", 
              RowBox[{"t", ",", "3", ",", "16", ",", "3"}], "]"}], "]"}], 
            "<>", "\"\<\\n\>\""}], ",", 
           RowBox[{"{", 
            RowBox[{"t", ",", 
             RowBox[{"Length", "@", "vertin"}]}], "}"}]}], "]"}]}], "}"}], "//",
        "Flatten"}]}], ";"}]}], "]"}]}]}], "Input",
 GeneratedCell->False,
 CellAutoOverwrite->False,
 CellChangeTimes->{
  3.8846668061918993`*^9, {3.9451203990952206`*^9, 3.945120457655691*^9}, {
   3.9451204878642483`*^9, 3.9451205209457245`*^9}, {3.94512055985736*^9, 
   3.9451206417708197`*^9}, {3.94512114727057*^9, 3.945121175779439*^9}, {
   3.9451321572700186`*^9, 3.9451321637506266`*^9}, {3.9451322426316233`*^9, 
   3.9451322502879457`*^9}},
 CellLabel->"In[5]:=",ExpressionUUID->"24e9c283-83ca-47c0-ba50-89642747b36f"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"result", "=", 
   RowBox[{"{", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"extract", "[", 
     RowBox[{"#", ",", "\"\<Vertin\>\""}], "]"}], "&"}], "/@", 
   RowBox[{"(", 
    RowBox[{"Select", "[", 
     RowBox[{
      RowBox[{"FileNames", "[", "]"}], ",", 
      RowBox[{
       RowBox[{
        RowBox[{"FileExtension", "[", "#", "]"}], "==", "\"\<json\>\""}], 
       "&"}]}], "]"}], ")"}]}], ";"}]}], "Input",
 GeneratedCell->False,
 CellAutoOverwrite->False,
 CellChangeTimes->{
  3.8846668061918993`*^9, {3.9451164693241224`*^9, 3.94511647713087*^9}, {
   3.9451194621494627`*^9, 3.9451194627021008`*^9}, {3.9451202783526344`*^9, 
   3.945120284048242*^9}, {3.945120532012893*^9, 3.945120588227661*^9}, {
   3.9451206940048337`*^9, 3.945120730134431*^9}, {3.945120923300893*^9, 
   3.9451209241667776`*^9}, {3.945121096226098*^9, 3.945121097505619*^9}, {
   3.9451211381118703`*^9, 3.945121158727756*^9}},
 CellLabel->"In[7]:=",ExpressionUUID->"79f37d0e-9cda-4cf4-b96b-f777927d95e0"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Export", "[", 
   RowBox[{"\"\<5043.txt\>\"", ",", 
    RowBox[{"DeleteCases", "[", 
     RowBox[{"result", ",", "\"\<\\n\>\""}], "]"}]}], "]"}], ";"}]], "Input",
 GeneratedCell->False,
 CellAutoOverwrite->False,
 CellChangeTimes->{
  3.8846668061918993`*^9, {3.9451212507958517`*^9, 3.945121314832137*^9}, {
   3.9451213617350407`*^9, 3.9451214073023195`*^9}, {3.9451323448370132`*^9, 
   3.945132379525267*^9}},
 CellLabel->"In[11]:=",ExpressionUUID->"c8073400-6106-4929-a165-f95b8a41bf83"],

Cell[CellGroupData[{

Cell["Fish-Audio", "Section",
 CellChangeTimes->{{3.9452150275403366`*^9, 
  3.945215030919001*^9}},ExpressionUUID->"b7915da3-693e-466e-a2c1-\
d3273e38949e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"text", "=", 
   RowBox[{"Import", "[", 
    RowBox[{"\"\<ASR-5043-1.txt\>\"", ",", "\"\<Data\>\""}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.9452048165166855`*^9, 3.9452048421868963`*^9}},
 CellLabel->"In[3]:=",ExpressionUUID->"4cd21372-4afe-4728-8488-760759b8a416"],

Cell[BoxData[
 RowBox[{
  RowBox[{"output", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"StringReplace", "[", 
        RowBox[{
         RowBox[{"Sequence", "@@", 
          RowBox[{"StringCases", "[", 
           RowBox[{"#", ",", 
            RowBox[{
             RowBox[{"\"\<.\\\\training_set\\\\\>\"", "~~", 
              RowBox[{"Shortest", "[", "x__", "]"}], "~~", "\"\<|\>\""}], "->",
              "x"}]}], "]"}]}], ",", 
         RowBox[{"\"\<.wav\>\"", "->", "\"\<.lab\>\""}]}], "]"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Sequence", "@@", 
        RowBox[{"StringCases", "[", 
         RowBox[{"#", ",", 
          RowBox[{
           RowBox[{"\"\<|en|\>\"", "~~", "x__"}], "->", "x"}]}], "]"}]}]}], 
      "}"}], "&"}], "/@", "text"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.9452050156893263`*^9, 3.945205187812604*^9}, {
  3.9452052551596794`*^9, 3.94520528104459*^9}, {3.9452053902424135`*^9, 
  3.945205423454458*^9}, {3.9452054872617764`*^9, 3.945205512273077*^9}},
 CellLabel->"In[25]:=",ExpressionUUID->"766c8b8b-cb96-4bce-8b2d-51e45d7168bb"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Export", "[", 
     RowBox[{
      RowBox[{"\"\<export_for_fishaudio\\\\\>\"", "<>", 
       RowBox[{"#", "[", 
        RowBox[{"[", "1", "]"}], "]"}]}], ",", 
      RowBox[{"#", "[", 
       RowBox[{"[", "2", "]"}], "]"}], ",", "\"\<Text\>\""}], "]"}], "&"}], "/@",
    "output"}], ";"}]], "Input",
 CellChangeTimes->{{3.9452055191239123`*^9, 3.9452056187555075`*^9}, {
  3.9452056792090044`*^9, 3.945205682841941*^9}},
 CellLabel->"In[28]:=",ExpressionUUID->"8385d61d-2b9a-4de8-81c7-7b7dc1f326f9"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"CopyFile", "[", 
     RowBox[{
      RowBox[{"\"\<..\\\\Selection\\\\5043\\\\\>\"", "<>", 
       RowBox[{"StringReplace", "[", 
        RowBox[{
         RowBox[{"#", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{"\"\<.lab\>\"", "->", "\"\<.wav\>\""}]}], "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"\"\<export_for_fishaudio\\\\\>\"", "<>", 
       RowBox[{"StringReplace", "[", 
        RowBox[{
         RowBox[{"#", "[", 
          RowBox[{"[", "1", "]"}], "]"}], ",", 
         RowBox[{"\"\<.lab\>\"", "->", "\"\<.wav\>\""}]}], "]"}]}]}], "]"}], 
    "&"}], "/@", "output"}], ";"}]], "Input",
 CellChangeTimes->{{3.9452057167848916`*^9, 3.9452058262706685`*^9}},
 CellLabel->"In[29]:=",ExpressionUUID->"5305a960-7b15-4b9c-9b96-88ae057333dd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"resultFile", "=", 
   RowBox[{"FileNames", "[", 
    RowBox[{"All", ",", "\"\<export_for_fishaudio\>\""}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.94520715538624*^9, 3.94520719410061*^9}, 
   3.9452072564842014`*^9},
 CellLabel->"In[14]:=",ExpressionUUID->"bc61f2ed-9c62-4655-b346-f1a5646b7b97"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"RenameFile", "[", 
     RowBox[{"#", ",", 
      RowBox[{"StringReplace", "[", 
       RowBox[{"#", ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"\"\<.wav.wav\>\"", "->", "\"\<.wav\>\""}], ",", 
          RowBox[{"\"\<.lab.lab\>\"", "->", "\"\<.lab\>\""}]}], "}"}]}], 
       "]"}]}], "]"}], "&"}], "/@", "resultFile"}], ";"}]], "Input",
 CellChangeTimes->{{3.9452071291600647`*^9, 3.9452071415386324`*^9}, {
  3.945207421542309*^9, 3.9452074363165708`*^9}},
 CellLabel->"In[19]:=",ExpressionUUID->"fa0509a1-35cb-40f0-b506-147cb2f17a73"]
}, Open  ]],

Cell[CellGroupData[{

Cell["GPT-SoVITS", "Section",
 CellChangeTimes->{{3.945215036880537*^9, 
  3.9452150410760493`*^9}},ExpressionUUID->"6e299851-bb52-4c16-8967-\
13646cfef521"],

Cell[BoxData[
 RowBox[{
  RowBox[{"text", "=", 
   RowBox[{"Import", "[", 
    RowBox[{"\"\<ASR-5043-1.txt\>\"", ",", "\"\<Data\>\""}], "]"}]}], 
  ";"}]], "Input",
 CellLabel->"In[18]:=",ExpressionUUID->"dfac7c9e-1e26-4132-bfe2-631ebd1f195c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"output", "=", 
   RowBox[{
    RowBox[{
     RowBox[{"StringReplace", "[", 
      RowBox[{"#", ",", 
       RowBox[{
       "\"\<.\\\\training_set\\\\\>\"", "->", 
        "\"\</root/autodl-tmp/data/\>\""}]}], "]"}], "&"}], "/@", "text"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.9452150859764333`*^9, 3.9452150958039503`*^9}, {
  3.9452151723153*^9, 3.945215277222208*^9}, {3.9452153519545293`*^9, 
  3.9452153533180037`*^9}},
 CellLabel->"In[19]:=",ExpressionUUID->"a646e0d3-2f97-4280-a64b-2f0dcc93baa8"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Export", "[", 
   RowBox[{
   "\"\<export_for_gptsovits\\\\ASR-5043-GPT.list\>\"", ",", "output", ",", 
    "\"\<Text\>\""}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.945215073930119*^9, 3.9452150755800705`*^9}, {
   3.9452152970239315`*^9, 3.945215339515633*^9}, 3.945215391807802*^9},
 CellLabel->"In[22]:=",ExpressionUUID->"3e131571-7f74-4f0f-94e1-b4d196759fd2"]
}, Open  ]]
},
WindowSize->{1190.25, 708.75},
WindowMargins->{{0, Automatic}, {Automatic, 0}},
FrontEndVersion->"13.3 for Microsoft Windows (64-bit) (2023\:5e746\:67083\
\:65e5)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"2854812d-bbf3-4e5d-ae6a-08b73b9170d9"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 677, 17, 78, "Input",ExpressionUUID->"4c86b7e1-e625-43e0-a6e7-4f40cbfc7b19"],
Cell[1238, 39, 1951, 52, 168, "Input",ExpressionUUID->"24e9c283-83ca-47c0-ba50-89642747b36f"],
Cell[3192, 93, 1068, 26, 62, "Input",ExpressionUUID->"79f37d0e-9cda-4cf4-b96b-f777927d95e0"],
Cell[4263, 121, 527, 12, 43, "Input",ExpressionUUID->"c8073400-6106-4929-a165-f95b8a41bf83"],
Cell[CellGroupData[{
Cell[4815, 137, 157, 3, 67, "Section",ExpressionUUID->"b7915da3-693e-466e-a2c1-d3273e38949e"],
Cell[4975, 142, 312, 7, 43, "Input",ExpressionUUID->"4cd21372-4afe-4728-8488-760759b8a416"],
Cell[5290, 151, 1117, 27, 78, "Input",ExpressionUUID->"766c8b8b-cb96-4bce-8b2d-51e45d7168bb"],
Cell[6410, 180, 559, 14, 43, "Input",ExpressionUUID->"8385d61d-2b9a-4de8-81c7-7b7dc1f326f9"],
Cell[6972, 196, 846, 21, 78, "Input",ExpressionUUID->"5305a960-7b15-4b9c-9b96-88ae057333dd"],
Cell[7821, 219, 341, 8, 43, "Input",ExpressionUUID->"bc61f2ed-9c62-4655-b346-f1a5646b7b97"],
Cell[8165, 229, 616, 15, 43, "Input",ExpressionUUID->"fa0509a1-35cb-40f0-b506-147cb2f17a73"]
}, Open  ]],
Cell[CellGroupData[{
Cell[8818, 249, 157, 3, 67, "Section",ExpressionUUID->"6e299851-bb52-4c16-8967-13646cfef521"],
Cell[8978, 254, 243, 6, 43, "Input",ExpressionUUID->"dfac7c9e-1e26-4132-bfe2-631ebd1f195c"],
Cell[9224, 262, 545, 14, 43, "Input",ExpressionUUID->"a646e0d3-2f97-4280-a64b-2f0dcc93baa8"],
Cell[9772, 278, 405, 8, 98, "Input",ExpressionUUID->"3e131571-7f74-4f0f-94e1-b4d196759fd2"]
}, Open  ]]
}
]
*)

